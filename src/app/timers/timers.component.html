<div class="units">
    <button
        type="button"
        class="no-padding button-image-content button-scale"
        mat-button
        [attr.aria-label]="'Add ' + unit.name"
        [matTooltip]="'Add ' + unit.name"
        *ngFor="let unit of units"
        (click)="startTimer(unit, 'enemy')"
    >
        <svg-icon
            [src]="'/assets/squad/' + unit.code + '.svg'"
            aria-hidden="true"
            svgClass="squad-icon enemy"></svg-icon>
    </button>
</div>
<div class="timers">
    <div class="timer mat-elevation-z1" *ngFor="let timer of timers; let i = index">
        <button
            type="button"
            class="unit-icon no-padding button-image-content button-scale"
            mat-button
            [attr.aria-label]="'Change side of ' + timer.unit.name + '. Currently ' + timer.side"
            [matTooltip]="'Change side of ' + timer.unit.name"
            (click)="changeSide(i)"
        >
            <svg-icon [src]="'/assets/squad/' + timer.unit.code + '.svg'"
                aria-hidden="true"
                [svgClass]="['squad-icon', timer.side]"></svg-icon>
        </button>
        <div class="time-container">
            <button
                type="button"
                class="time-action"
                mat-icon-button
                aria-label="Subtract one minute"
                matTooltip="Subtract one minute"
                (click)="addMinutesToTimer(i, -1)"
            >
                <mat-icon>remove_circle_outline</mat-icon>
            </button>
            <app-countdown [date]="timer.spawnsOn"
                [updateObservable]="updateObservable"></app-countdown>
            <button
                type="button"
                class="time-action"
                mat-icon-button
                aria-label="Add one minute"
                matTooltip="Add one minute"
                (click)="addMinutesToTimer(i, 1)"
            >
                <mat-icon>add_circle_outline</mat-icon>
            </button>
        </div>
        <div class="actions">
            <button
                type="button"
                mat-icon-button
                aria-label="Delete timer"
                matTooltip="Delete timer"
                (click)="removeTimer(i)"
            >
                <mat-icon>delete</mat-icon>
            </button>
        </div>
    </div>
</div>
<p *ngIf="timers.length === 0" class="timers-info text-center">
    Click on a vehicle when it is destroyed and a timer will be started.
</p>
<div *ngIf="roomName !== null && roomUrl !== null">
    <button class="link"
            type="button"
            [cdkCopyToClipboard]="roomUrl"
            #roomUrlTooltip="matTooltip"
            (mouseenter)="$event.stopImmediatePropagation()"
            matTooltip="URL copied"
            (click)="copyRoomUrl(roomUrlTooltip)">
        {{roomName}}:
    </button>
    <span [class.text-error]="socketStatus === 'disconnected'"
          [class.text-success]="socketStatus === 'connected'">
        {{socketStatus}}
    </span>
    <button mat-icon-button
            type="button"
            aria-label="Disconnect"
            matTooltip="Disconnect"
            (click)="disconnect()">
        <mat-icon>power_off</mat-icon>
    </button>
</div>
<button mat-fab
        type="button"
        class="create-room create-room-desktop"
        matTooltip="Share your timers"
        aria-label="Share your timers"
        *ngIf="roomName === null"
        (click)="share()">
    <mat-icon *ngIf="socket === null">share</mat-icon>
    <mat-spinner *ngIf="socket !== null" [diameter]="24"></mat-spinner>
</button>
<button mat-mini-fab
        type="button"
        class="create-room create-room-mobile"
        matTooltip="Share your timers"
        aria-label="Share your timers"
        *ngIf="roomName === null"
        (click)="share()">
    <mat-icon *ngIf="socket === null">share</mat-icon>
    <mat-spinner *ngIf="socket !== null" [diameter]="16"></mat-spinner>
</button>
